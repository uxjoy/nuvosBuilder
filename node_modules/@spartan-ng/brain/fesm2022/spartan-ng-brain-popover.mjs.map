{"version":3,"file":"spartan-ng-brain-popover.mjs","sources":["../../../../libs/brain/popover/src/lib/brn-popover-close.directive.ts","../../../../libs/brain/popover/src/lib/brn-popover-content.directive.ts","../../../../libs/brain/popover/src/lib/brn-popover-trigger.directive.ts","../../../../libs/brain/popover/src/lib/brn-popover.component.ts","../../../../libs/brain/popover/src/index.ts","../../../../libs/brain/popover/src/spartan-ng-brain-popover.ts"],"sourcesContent":["import { Directive } from '@angular/core';\nimport { BrnDialogCloseDirective } from '@spartan-ng/brain/dialog';\n\n@Directive({\n\tselector: 'button[brnPopoverClose]',\n\tstandalone: true,\n})\nexport class BrnPopoverCloseDirective extends BrnDialogCloseDirective {}\n","import { Directive } from '@angular/core';\nimport { provideExposesStateProviderExisting } from '@spartan-ng/brain/core';\nimport { BrnDialogContentDirective } from '@spartan-ng/brain/dialog';\n\n@Directive({\n\tselector: '[brnPopoverContent]',\n\tstandalone: true,\n\tproviders: [provideExposesStateProviderExisting(() => BrnPopoverContentDirective)],\n})\nexport class BrnPopoverContentDirective<T> extends BrnDialogContentDirective<T> {}\n","import { Directive, ElementRef, effect, inject, input, untracked } from '@angular/core';\nimport { BrnDialogTriggerDirective } from '@spartan-ng/brain/dialog';\nimport type { BrnPopoverComponent } from './brn-popover.component';\n\n@Directive({\n\tselector: 'button[brnPopoverTrigger],button[brnPopoverTriggerFor]',\n\tstandalone: true,\n\thost: {\n\t\t'[id]': 'id()',\n\t\t'aria-haspopup': 'dialog',\n\t\t'[attr.aria-expanded]': \"state() === 'open' ? 'true': 'false'\",\n\t\t'[attr.data-state]': 'state()',\n\t\t'[attr.aria-controls]': 'dialogId',\n\t},\n})\nexport class BrnPopoverTriggerDirective extends BrnDialogTriggerDirective {\n\tprivate readonly _host = inject(ElementRef, { host: true });\n\n\tpublic readonly brnPopoverTriggerFor = input<BrnPopoverComponent | undefined>(undefined, {\n\t\talias: 'brnPopoverTriggerFor',\n\t});\n\n\tconstructor() {\n\t\tsuper();\n\t\tif (!this._brnDialog) return;\n\t\tthis._brnDialog.mutableAttachTo().set(this._host.nativeElement);\n\t\tthis._brnDialog.mutableCloseOnOutsidePointerEvents().set(true);\n\n\t\teffect(() => {\n\t\t\tconst brnDialog = this.brnPopoverTriggerFor();\n\t\t\tuntracked(() => {\n\t\t\t\tif (!brnDialog) return;\n\t\t\t\tbrnDialog.mutableAttachTo().set(this._host.nativeElement);\n\t\t\t\tbrnDialog.mutableCloseOnOutsidePointerEvents().set(true);\n\t\t\t\tthis.mutableBrnDialogTriggerFor().set(brnDialog);\n\t\t\t});\n\t\t});\n\t}\n}\n","import {\n\tChangeDetectionStrategy,\n\tComponent,\n\teffect,\n\tforwardRef,\n\tinput,\n\tnumberAttribute,\n\tuntracked,\n\tViewEncapsulation,\n} from '@angular/core';\nimport { BrnDialogComponent, BrnDialogDefaultOptions, provideBrnDialogDefaultOptions } from '@spartan-ng/brain/dialog';\n\nexport const BRN_POPOVER_DIALOG_DEFAULT_OPTIONS: Partial<BrnDialogDefaultOptions> = {\n\thasBackdrop: false,\n\tscrollStrategy: 'reposition',\n};\n\nexport type BrnPopoverAlign = 'start' | 'center' | 'end';\n\n@Component({\n\tselector: 'brn-popover',\n\tstandalone: true,\n\ttemplate: `\n\t\t<ng-content />\n\t`,\n\tproviders: [\n\t\t{\n\t\t\tprovide: BrnDialogComponent,\n\t\t\tuseExisting: forwardRef(() => BrnPopoverComponent),\n\t\t},\n\t\tprovideBrnDialogDefaultOptions(BRN_POPOVER_DIALOG_DEFAULT_OPTIONS),\n\t],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None,\n\texportAs: 'brnPopover',\n})\nexport class BrnPopoverComponent extends BrnDialogComponent {\n\tpublic readonly align = input<BrnPopoverAlign>('center');\n\tpublic readonly sideOffset = input(0, { transform: numberAttribute });\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.setAriaDescribedBy('');\n\t\tthis.setAriaLabelledBy('');\n\n\t\teffect(() => {\n\t\t\tconst align = this.align();\n\t\t\tuntracked(() => {\n\t\t\t\tthis.mutableAttachPositions().set([\n\t\t\t\t\t{\n\t\t\t\t\t\toriginX: align,\n\t\t\t\t\t\toriginY: 'bottom',\n\t\t\t\t\t\toverlayX: align,\n\t\t\t\t\t\toverlayY: 'top',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\toriginX: align,\n\t\t\t\t\t\toriginY: 'top',\n\t\t\t\t\t\toverlayX: align,\n\t\t\t\t\t\toverlayY: 'bottom',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t\t\tuntracked(() => {\n\t\t\t\tthis.applySideOffset(this.sideOffset());\n\t\t\t});\n\t\t});\n\t\teffect(() => {\n\t\t\tconst sideOffset = this.sideOffset();\n\t\t\tuntracked(() => {\n\t\t\t\tthis.applySideOffset(sideOffset);\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate applySideOffset(sideOffset: number) {\n\t\tthis.mutableAttachPositions().update((positions) =>\n\t\t\tpositions.map((position) => ({\n\t\t\t\t...position,\n\t\t\t\toffsetY: position.originY === 'top' ? -sideOffset : sideOffset,\n\t\t\t})),\n\t\t);\n\t}\n}\n","import { NgModule } from '@angular/core';\n\nimport { BrnPopoverCloseDirective } from './lib/brn-popover-close.directive';\nimport { BrnPopoverContentDirective } from './lib/brn-popover-content.directive';\nimport { BrnPopoverTriggerDirective } from './lib/brn-popover-trigger.directive';\nimport { BrnPopoverComponent } from './lib/brn-popover.component';\n\nexport * from './lib/brn-popover-close.directive';\nexport * from './lib/brn-popover-content.directive';\nexport * from './lib/brn-popover-trigger.directive';\nexport * from './lib/brn-popover.component';\n\nexport const BrnPopoverImports = [\n\tBrnPopoverComponent,\n\tBrnPopoverTriggerDirective,\n\tBrnPopoverCloseDirective,\n\tBrnPopoverContentDirective,\n] as const;\n\n@NgModule({\n\timports: [...BrnPopoverImports],\n\texports: [...BrnPopoverImports],\n})\nexport class BrnPopoverModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}